(()=>{"use strict";var e={659:(e,t,r)=>{r.r(t)},283:(e,t,r)=>{r.r(t)},485:(e,t,r)=>{r.r(t)},717:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(842)),n=r(527);t.default=class{constructor(){this.controller=new s.default,this.view=new n.AppView}start(){document.querySelector(".sources").addEventListener("click",(e=>this.controller.getNews(e,(e=>this.view.drawNews(e))))),this.controller.getSources((e=>this.view.drawSources(e)))}}},853:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(24));class n extends s.default{constructor(){super("https://newsapi.org/v2/",{apiKey:"af9f7aaae3b14e15a37e69e7a9d468fb"})}}t.default=n},842:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(853));class n extends s.default{getSources(e){super.getResp({endpoint:"sources"},e)}getNews(e,t){let r=e.target;const o=e.currentTarget;for(;r!==o;){if(r.classList.contains("source__item")){const e=r.getAttribute("data-source-id");return void(o.getAttribute("data-source")!==e&&e&&(o.setAttribute("data-source",e),super.getResp({endpoint:"everything",options:{sources:e}},t)))}r=r.parentNode}}}t.default=n},24:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.baseLink=e,this.options=t}getResp({endpoint:e="",options:t={}},r=(()=>{console.error("No callback for GET response")})){this.load("GET",e,r,t)}errorHandler(e){if(!e.ok)throw 401!==e.status&&404!==e.status||console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`),Error(e.statusText);return e}makeUrl(e,t){const r=Object.assign(Object.assign({},this.options),e);let o=`${this.baseLink}${t}?`;return Object.keys(r).forEach((e=>{o+=`${e}=${r[e]}&`})),o.slice(0,-1)}load(e,t,r,o={}){fetch(this.makeUrl(o,t),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>r(e))).catch((e=>console.error(e)))}}},527:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AppView=void 0;const s=o(r(798)),n=o(r(53));class u{constructor(){this.news=new s.default,this.sources=new n.default}drawNews(e){const t=(null==e?void 0:e.articles)?null==e?void 0:e.articles:[];this.news.draw(t)}drawSources(e){const t=(null==e?void 0:e.sources)?null==e?void 0:e.sources:[];this.sources.draw(t)}}t.AppView=u,t.default=u},798:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(659),t.default=class{draw(e){const t=e.length>=10?e.filter(((e,t)=>t<10)):e,r=document.createDocumentFragment(),o=document.querySelector("#newsItemTemp");t.forEach(((e,t)=>{const s=o.content.cloneNode(!0);t%2&&s.querySelector(".news__item").classList.add("alt"),s.querySelector(".news__meta-photo").style.backgroundImage=`url(${e.urlToImage||"img/news_placeholder.jpg"})`,s.querySelector(".news__meta-author").textContent=e.author||e.source.name,s.querySelector(".news__meta-date").textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"),s.querySelector(".news__description-title").textContent=e.title,s.querySelector(".news__description-source").textContent=e.source.name,s.querySelector(".news__description-content").textContent=e.description,s.querySelector(".news__read-more a").setAttribute("href",e.url),r.append(s)})),document.querySelector(".news").innerHTML="",document.querySelector(".news").appendChild(r)}}},53:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(283),t.default=class{draw(e){const t=document.createDocumentFragment(),r=document.querySelector("#sourceItemTemp");e.forEach((e=>{const o=r.content.cloneNode(!0);o.querySelector(".source__item-name").textContent=e.name,o.querySelector(".source__item").setAttribute("data-source-id",e.id),t.append(o)})),document.querySelector(".sources").append(t)}}},607:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(717));r(485),(new s.default).start()}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBWXBGLGNBQWMsc0JBQTBDc0UsWUFBY1IsRUFBS1csS0FDdkZXLEVBQVlwRixjQUFjLGlCQUFvQ3NCLGFBQWEsaUJBQWtCd0MsRUFBS3VCLElBRW5HMUIsRUFBU3FCLE9BQU9JLE1BR25CckYsU0FBU0MsY0FBYyxZQUE0QmdGLE9BQU9yQixNLHlKQ2xCbkUsa0JBQ0EsUUFFWSxJQUFJLFdBQ1o3RCxVQ0hBd0YsRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsSUFPVixPQUhBRSxFQUFvQkwsR0FBVU0sS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELFFDcEJmSixFQUFvQlEsRUFBS0osSUFDSCxvQkFBWEssUUFBMEJBLE9BQU9DLGFBQzFDekQsT0FBTzBELGVBQWVQLEVBQVNLLE9BQU9DLFlBQWEsQ0FBRUUsTUFBTyxXQUU3RDNELE9BQU8wRCxlQUFlUCxFQUFTLGFBQWMsQ0FBRVEsT0FBTyxLQ0Y3QlosRUFBb0IsTSIsInNvdXJjZXMiOlsid2VicGFjazovL05ld3NKUy8uL3NyYy9jb21wb25lbnRzL2FwcC9hcHAudHMiLCJ3ZWJwYWNrOi8vTmV3c0pTLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci9hcHBMb2FkZXIudHMiLCJ3ZWJwYWNrOi8vTmV3c0pTLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci9jb250cm9sbGVyLnRzIiwid2VicGFjazovL05ld3NKUy8uL3NyYy9jb21wb25lbnRzL2NvbnRyb2xsZXIvbG9hZGVyLnRzIiwid2VicGFjazovL05ld3NKUy8uL3NyYy9jb21wb25lbnRzL3ZpZXcvYXBwVmlldy50cyIsIndlYnBhY2s6Ly9OZXdzSlMvLi9zcmMvY29tcG9uZW50cy92aWV3L25ld3MvbmV3cy50cyIsIndlYnBhY2s6Ly9OZXdzSlMvLi9zcmMvY29tcG9uZW50cy92aWV3L3NvdXJjZXMvc291cmNlcy50cyIsIndlYnBhY2s6Ly9OZXdzSlMvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vTmV3c0pTL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL05ld3NKUy93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL05ld3NKUy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFwcENvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlci9jb250cm9sbGVyJztcclxuaW1wb3J0IHsgQXBwVmlldyB9IGZyb20gJy4uL3ZpZXcvYXBwVmlldyc7XHJcblxyXG5jbGFzcyBBcHAge1xyXG4gICAgcHJpdmF0ZSBjb250cm9sbGVyOiBBcHBDb250cm9sbGVyO1xyXG4gICAgcHJpdmF0ZSB2aWV3OiBBcHBWaWV3O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBBcHBDb250cm9sbGVyKCk7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IEFwcFZpZXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvdXJjZXMnKSBhcyBIVE1MRWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT5cclxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmdldE5ld3MoZSwgKGRhdGEpID0+IHRoaXMudmlldy5kcmF3TmV3cyhkYXRhKSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlci5nZXRTb3VyY2VzKChkYXRhKSA9PiB0aGlzLnZpZXcuZHJhd1NvdXJjZXMoZGF0YSkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcHA7XHJcbiIsImltcG9ydCBMb2FkZXIgZnJvbSAnLi9sb2FkZXInO1xyXG5cclxuY2xhc3MgQXBwTG9hZGVyIGV4dGVuZHMgTG9hZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdodHRwczovL25ld3NhcGkub3JnL3YyLycsIHtcclxuICAgICAgICAgICAgYXBpS2V5OiAnYWY5ZjdhYWFlM2IxNGUxNWEzN2U2OWU3YTlkNDY4ZmInLCAvLyDQv9C+0LvRg9GH0LjRgtC1INGB0LLQvtC5INC60LvRjtGHIGh0dHBzOi8vbmV3c2FwaS5vcmcvXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwcExvYWRlcjtcclxuIiwiaW1wb3J0IEFwcExvYWRlciBmcm9tICcuL2FwcExvYWRlcic7XHJcbmltcG9ydCB7Q2FsbGJhY2tUeXBlLCBJRGF0YU5ld3MsIElEYXRhU291cmNlfSBmcm9tIFwiLi4vLi4vdHlwZXMvaW50ZXJmYWNlXCI7XHJcblxyXG5jbGFzcyBBcHBDb250cm9sbGVyIGV4dGVuZHMgQXBwTG9hZGVyIHtcclxuICAgIGdldFNvdXJjZXMoY2FsbGJhY2s6IChkYXRhPzogSURhdGFTb3VyY2UpID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlci5nZXRSZXNwKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogJ3NvdXJjZXMnLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWxsYmFja1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmV3cyhlOiBFdmVudCwgY2FsbGJhY2s6IChkYXRhPzogSURhdGFOZXdzKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgbGV0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IG5ld3NDb250YWluZXIgPSBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHdoaWxlICh0YXJnZXQgIT09IG5ld3NDb250YWluZXIpIHtcclxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NvdXJjZV9faXRlbScpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VJZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc291cmNlLWlkJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3c0NvbnRhaW5lci5nZXRBdHRyaWJ1dGUoJ2RhdGEtc291cmNlJykgIT09IHNvdXJjZUlkICYmIHNvdXJjZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3c0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtc291cmNlJywgc291cmNlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyLmdldFJlc3AoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnZXZlcnl0aGluZycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlczogc291cmNlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGUgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcHBDb250cm9sbGVyO1xyXG4iLCJcclxuXHJcbmNsYXNzIExvYWRlciB7XHJcbiAgICBiYXNlTGluazogc3RyaW5nO1xyXG4gICAgb3B0aW9uczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihiYXNlTGluazogc3RyaW5nLCBvcHRpb25zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XHJcbiAgICAgICAgdGhpcy5iYXNlTGluayA9IGJhc2VMaW5rO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVzcChcclxuICAgICAgICB7IGVuZHBvaW50ID0gJycsIG9wdGlvbnMgPSB7fSB9LFxyXG4gICAgICAgIGNhbGxiYWNrID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBjYWxsYmFjayBmb3IgR0VUIHJlc3BvbnNlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkKCdHRVQnLCBlbmRwb2ludCwgY2FsbGJhY2ssIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGVycm9ySGFuZGxlcihyZXM6IFJlc3BvbnNlKSB7XHJcbiAgICAgICAgaWYgKCFyZXMub2spIHtcclxuICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwMSB8fCByZXMuc3RhdHVzID09PSA0MDQpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgU29ycnksIGJ1dCB0aGVyZSBpcyAke3Jlcy5zdGF0dXN9IGVycm9yOiAke3Jlcy5zdGF0dXNUZXh0fWApO1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihyZXMuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VVcmwob3B0aW9uczogb2JqZWN0LCBlbmRwb2ludDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgdXJsT3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zLCAuLi5vcHRpb25zIH07XHJcbiAgICAgICAgbGV0IHVybCA9IGAke3RoaXMuYmFzZUxpbmt9JHtlbmRwb2ludH0/YDtcclxuXHJcbiAgICAgICAgT2JqZWN0LmtleXModXJsT3B0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgIHVybCArPSBgJHtrZXl9PSR7dXJsT3B0aW9uc1trZXldfSZgO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdXJsLnNsaWNlKDAsIC0xKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkKG1ldGhvZDogc3RyaW5nLCBlbmRwb2ludDogc3RyaW5nLCBjYWxsYmFjazooZGF0YT86IEpTT04pID0+IHZvaWQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGZldGNoKHRoaXMubWFrZVVybChvcHRpb25zLCBlbmRwb2ludCksIHsgbWV0aG9kIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHRoaXMuZXJyb3JIYW5kbGVyKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gY2FsbGJhY2soZGF0YSkpXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBMb2FkZXI7XHJcbiIsImltcG9ydCBOZXdzIGZyb20gJy4vbmV3cy9uZXdzJztcclxuaW1wb3J0IFNvdXJjZXMgZnJvbSAnLi9zb3VyY2VzL3NvdXJjZXMnO1xyXG5pbXBvcnQge0lEYXRhTmV3cywgSURhdGFTb3VyY2V9IGZyb20gXCIuLi8uLi90eXBlcy9pbnRlcmZhY2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBBcHBWaWV3IHtcclxuICAgIG5ld3M6IE5ld3M7XHJcbiAgICBzb3VyY2VzOiBTb3VyY2VzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubmV3cyA9IG5ldyBOZXdzKCk7XHJcbiAgICAgICAgdGhpcy5zb3VyY2VzID0gbmV3IFNvdXJjZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3TmV3cyhkYXRhPzogSURhdGFOZXdzKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdmFsdWVzID0gZGF0YT8uYXJ0aWNsZXMgPyBkYXRhPy5hcnRpY2xlcyA6IFtdO1xyXG4gICAgICAgIHRoaXMubmV3cy5kcmF3KHZhbHVlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1NvdXJjZXMoZGF0YT86IElEYXRhU291cmNlKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdmFsdWVzID0gZGF0YT8uc291cmNlcyA/IGRhdGE/LnNvdXJjZXMgOiBbXTtcclxuICAgICAgICB0aGlzLnNvdXJjZXMuZHJhdyh2YWx1ZXMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcHBWaWV3O1xyXG4iLCJpbXBvcnQge0lBcnRpY2xlc30gZnJvbSBcIi4uLy4uLy4uL3R5cGVzL2ludGVyZmFjZVwiO1xyXG5cclxuaW1wb3J0ICcuL25ld3MuY3NzJztcclxuXHJcbmNsYXNzIE5ld3Mge1xyXG4gICAgZHJhdyhkYXRhOiBJQXJ0aWNsZXNbXSkge1xyXG4gICAgICAgIGNvbnN0IG5ld3MgPSBkYXRhLmxlbmd0aCA+PSAxMCA/IGRhdGEuZmlsdGVyKChfaXRlbSwgaWR4KSA9PiBpZHggPCAxMCkgOiBkYXRhO1xyXG5cclxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSBhcyBEb2N1bWVudEZyYWdtZW50O1xyXG4gICAgICAgIGNvbnN0IG5ld3NJdGVtVGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdzSXRlbVRlbXAnKSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG5cclxuICAgICAgICBuZXdzLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdzQ2xvbmUgPSBuZXdzSXRlbVRlbXAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoaWR4ICUgMikgKG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKCcubmV3c19faXRlbScpIGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QuYWRkKCdhbHQnKTtcclxuXHJcbiAgICAgICAgICAgIChuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcignLm5ld3NfX21ldGEtcGhvdG8nKSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke1xyXG4gICAgICAgICAgICAgICAgaXRlbS51cmxUb0ltYWdlIHx8ICdpbWcvbmV3c19wbGFjZWhvbGRlci5qcGcnXHJcbiAgICAgICAgICAgIH0pYDtcclxuICAgICAgICAgICAgKG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKCcubmV3c19fbWV0YS1hdXRob3InKSBhcyBIVE1MRWxlbWVudCkudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICAgICAgaXRlbS5hdXRob3IgfHwgaXRlbS5zb3VyY2UubmFtZTtcclxuICAgICAgICAgICAgKG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKCcubmV3c19fbWV0YS1kYXRlJykgYXMgSFRNTEVsZW1lbnQpLnRleHRDb250ZW50ID0gaXRlbS5wdWJsaXNoZWRBdFxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIDEwKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCctJylcclxuICAgICAgICAgICAgICAgIC5yZXZlcnNlKClcclxuICAgICAgICAgICAgICAgIC5qb2luKCctJyk7XHJcblxyXG4gICAgICAgICAgICAobmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19kZXNjcmlwdGlvbi10aXRsZScpIGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudCA9IGl0ZW0udGl0bGU7XHJcbiAgICAgICAgICAgIChuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcignLm5ld3NfX2Rlc2NyaXB0aW9uLXNvdXJjZScpIGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudCA9IGl0ZW0uc291cmNlLm5hbWU7XHJcbiAgICAgICAgICAgIChuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcignLm5ld3NfX2Rlc2NyaXB0aW9uLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudCkudGV4dENvbnRlbnQgPSBpdGVtLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAobmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19yZWFkLW1vcmUgYScpIGFzIEhUTUxFbGVtZW50KS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBpdGVtLnVybCk7XHJcblxyXG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmQobmV3c0Nsb25lKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld3MnKSBhcyBIVE1MRWxlbWVudCkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzJykgYXMgSFRNTEVsZW1lbnQpLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTmV3cztcclxuIiwiaW1wb3J0IHtJU291cmNlc30gZnJvbSBcIi4uLy4uLy4uL3R5cGVzL2ludGVyZmFjZVwiO1xyXG5cclxuaW1wb3J0ICcuL3NvdXJjZXMuY3NzJztcclxuXHJcbmNsYXNzIFNvdXJjZXMge1xyXG4gICAgZHJhdyhkYXRhOiBJU291cmNlc1tdKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkgYXMgRG9jdW1lbnRGcmFnbWVudDtcclxuICAgICAgICBjb25zdCBzb3VyY2VJdGVtVGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzb3VyY2VJdGVtVGVtcCcpIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGRhdGEuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzb3VyY2VDbG9uZSA9IHNvdXJjZUl0ZW1UZW1wLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAoc291cmNlQ2xvbmUucXVlcnlTZWxlY3RvcignLnNvdXJjZV9faXRlbS1uYW1lJykgYXMgSFRNTFNwYW5FbGVtZW50KS50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZTtcclxuICAgICAgICAgICAgKHNvdXJjZUNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5zb3VyY2VfX2l0ZW0nKSBhcyBIVE1MRGl2RWxlbWVudCkuc2V0QXR0cmlidXRlKCdkYXRhLXNvdXJjZS1pZCcsIGl0ZW0uaWQpO1xyXG5cclxuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kKHNvdXJjZUNsb25lKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb3VyY2VzJykgYXMgSFRNTEVsZW1lbnQpLmFwcGVuZChmcmFnbWVudCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNvdXJjZXM7XHJcbiIsImltcG9ydCBBcHAgZnJvbSAnLi9jb21wb25lbnRzL2FwcC9hcHAnO1xyXG5pbXBvcnQgJy4vZ2xvYmFsLmNzcyc7XHJcblxyXG5jb25zdCBhcHAgPSBuZXcgQXBwKCk7XHJcbmFwcC5zdGFydCgpO1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNyk7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ0aGlzIiwiY29udHJvbGxlciIsInZpZXciLCJBcHBWaWV3Iiwic3RhcnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImdldE5ld3MiLCJkYXRhIiwiZHJhd05ld3MiLCJnZXRTb3VyY2VzIiwiZHJhd1NvdXJjZXMiLCJBcHBMb2FkZXIiLCJzdXBlciIsImFwaUtleSIsIkFwcENvbnRyb2xsZXIiLCJjYWxsYmFjayIsImdldFJlc3AiLCJlbmRwb2ludCIsInRhcmdldCIsIm5ld3NDb250YWluZXIiLCJjdXJyZW50VGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJzb3VyY2VJZCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsIm9wdGlvbnMiLCJzb3VyY2VzIiwicGFyZW50Tm9kZSIsImJhc2VMaW5rIiwiY29uc29sZSIsImVycm9yIiwibG9hZCIsImVycm9ySGFuZGxlciIsInJlcyIsIm9rIiwic3RhdHVzIiwibG9nIiwic3RhdHVzVGV4dCIsIkVycm9yIiwibWFrZVVybCIsInVybE9wdGlvbnMiLCJ1cmwiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInNsaWNlIiwibWV0aG9kIiwiZmV0Y2giLCJ0aGVuIiwianNvbiIsImNhdGNoIiwiZXJyIiwibmV3cyIsInZhbHVlcyIsImFydGljbGVzIiwiZHJhdyIsImxlbmd0aCIsImZpbHRlciIsIl9pdGVtIiwiaWR4IiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwibmV3c0l0ZW1UZW1wIiwiaXRlbSIsIm5ld3NDbG9uZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJhZGQiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInVybFRvSW1hZ2UiLCJ0ZXh0Q29udGVudCIsImF1dGhvciIsInNvdXJjZSIsIm5hbWUiLCJwdWJsaXNoZWRBdCIsInNwbGl0IiwicmV2ZXJzZSIsImpvaW4iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYXBwZW5kIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJzb3VyY2VJdGVtVGVtcCIsInNvdXJjZUNsb25lIiwiaWQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==