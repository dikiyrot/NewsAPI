(()=>{"use strict";var e={659:(e,t,r)=>{r.r(t)},283:(e,t,r)=>{r.r(t)},485:(e,t,r)=>{r.r(t)},717:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(842)),n=r(527);t.default=class{constructor(){this.controller=new s.default,this.view=new n.AppView}start(){document.querySelector(".sources").addEventListener("click",(e=>this.controller.getNews(e,(e=>this.view.drawNews(e))))),this.controller.getSources((e=>this.view.drawSources(e)))}}},853:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(24));class n extends s.default{constructor(){super("https://newsapi.org/v2/",{apiKey:"af9f7aaae3b14e15a37e69e7a9d468fb"})}}t.default=n},842:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(853));class n extends s.default{getSources(e){super.getResp({endpoint:"sources"},e)}getNews(e,t){let r=e.target;const o=e.currentTarget;for(;r!==o;){if(r.classList.contains("source__item")){const e=r.getAttribute("data-source-id");return void(o.getAttribute("data-source")!==e&&e&&(o.setAttribute("data-source",e),super.getResp({endpoint:"everything",options:{sources:e}},t)))}r=r.parentNode}}}t.default=n},24:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.baseLink=e,this.options=t}getResp({endpoint:e="",options:t={}},r=(()=>{console.error("No callback for GET response")})){this.load("GET",e,r,t)}errorHandler(e){if(!e.ok)throw 401!==e.status&&404!==e.status||console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`),Error(e.statusText);return e}makeUrl(e,t){const r=Object.assign(Object.assign({},this.options),e);let o=`${this.baseLink}${t}?`;return Object.keys(r).forEach((e=>{o+=`${e}=${r[e]}&`})),o.slice(0,-1)}load(e,t,r,o={}){fetch(this.makeUrl(o,t),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>r(e))).catch((e=>console.error(e)))}}},527:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AppView=void 0;const s=o(r(798)),n=o(r(53));class u{constructor(){this.news=new s.default,this.sources=new n.default}drawNews(e){const t=(null==e?void 0:e.articles)?null==e?void 0:e.articles:[];this.news.draw(t)}drawSources(e){const t=(null==e?void 0:e.sources)?null==e?void 0:e.sources:[];this.sources.draw(t)}}t.AppView=u,t.default=u},798:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(659),t.default=class{draw(e){const t=e.length>=10?e.filter(((e,t)=>t<10)):e,r=document.createDocumentFragment(),o=document.querySelector("#newsItemTemp");t.forEach(((e,t)=>{const s=o.content.cloneNode(!0);t%2&&s.querySelector(".news__item").classList.add("alt"),s.querySelector(".news__meta-photo").style.backgroundImage=`url(${e.urlToImage||"img/news_placeholder.jpg"})`,s.querySelector(".news__meta-author").textContent=e.author||e.source.name,s.querySelector(".news__meta-date").textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"),s.querySelector(".news__description-title").textContent=e.title,s.querySelector(".news__description-source").textContent=e.source.name,s.querySelector(".news__description-content").textContent=e.description,s.querySelector(".news__read-more a").setAttribute("href",e.url),r.append(s)})),document.querySelector(".news").innerHTML="",document.querySelector(".news").appendChild(r)}}},53:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(283),t.default=class{draw(e){const t=document.createDocumentFragment(),r=document.querySelector("#sourceItemTemp");e.forEach((e=>{const o=r.content.cloneNode(!0);o.querySelector(".source__item-name").textContent=e.name,o.querySelector(".source__item").setAttribute("data-source-id",e.id),t.append(o)})),document.querySelector(".sources").append(t)}}},607:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(717));r(485),(new s.default).start()}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBWXBGLGNBQWMsc0JBQTBDc0UsWUFBY1IsRUFBS1csS0FDdkZXLEVBQVlwRixjQUFjLGlCQUFvQ3NCLGFBQWEsaUJBQWtCd0MsRUFBS3VCLElBRW5HMUIsRUFBU3FCLE9BQU9JLE1BR25CckYsU0FBU0MsY0FBYyxZQUE0QmdGLE9BQU9yQixNLHlKQ2xCbkUsa0JBQ0EsUUFFWSxJQUFJLFdBQ1o3RCxVQ0hBd0YsRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsSUFPVixPQUhBRSxFQUFvQkwsR0FBVU0sS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELFFDcEJmSixFQUFvQlEsRUFBS0osSUFDSCxvQkFBWEssUUFBMEJBLE9BQU9DLGFBQzFDekQsT0FBTzBELGVBQWVQLEVBQVNLLE9BQU9DLFlBQWEsQ0FBRUUsTUFBTyxXQUU3RDNELE9BQU8wRCxlQUFlUCxFQUFTLGFBQWMsQ0FBRVEsT0FBTyxLQ0Y3QlosRUFBb0IsTSIsInNvdXJjZXMiOlsid2VicGFjazovL05ld3NKUy8uL3NyYy9jb21wb25lbnRzL2FwcC9hcHAudHMiLCJ3ZWJwYWNrOi8vTmV3c0pTLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci9hcHBMb2FkZXIudHMiLCJ3ZWJwYWNrOi8vTmV3c0pTLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci9jb250cm9sbGVyLnRzIiwid2VicGFjazovL05ld3NKUy8uL3NyYy9jb21wb25lbnRzL2NvbnRyb2xsZXIvbG9hZGVyLnRzIiwid2VicGFjazovL05ld3NKUy8uL3NyYy9jb21wb25lbnRzL3ZpZXcvYXBwVmlldy50cyIsIndlYnBhY2s6Ly9OZXdzSlMvLi9zcmMvY29tcG9uZW50cy92aWV3L25ld3MvbmV3cy50cyIsIndlYnBhY2s6Ly9OZXdzSlMvLi9zcmMvY29tcG9uZW50cy92aWV3L3NvdXJjZXMvc291cmNlcy50cyIsIndlYnBhY2s6Ly9OZXdzSlMvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vTmV3c0pTL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL05ld3NKUy93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL05ld3NKUy93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFwcENvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlci9jb250cm9sbGVyJztcclxuaW1wb3J0IHsgQXBwVmlldyB9IGZyb20gJy4uL3ZpZXcvYXBwVmlldyc7XHJcblxyXG5jbGFzcyBBcHAge1xyXG4gICAgY29udHJvbGxlcjogQXBwQ29udHJvbGxlcjtcclxuICAgIHZpZXc6IEFwcFZpZXc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IEFwcENvbnRyb2xsZXIoKTtcclxuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgQXBwVmlldygpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc291cmNlcycpIGFzIEhUTUxFbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PlxyXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZ2V0TmV3cyhlLCAoZGF0YSkgPT4gdGhpcy52aWV3LmRyYXdOZXdzKGRhdGEpKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmdldFNvdXJjZXMoKGRhdGEpID0+IHRoaXMudmlldy5kcmF3U291cmNlcyhkYXRhKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwcDtcclxuIiwiaW1wb3J0IExvYWRlciBmcm9tICcuL2xvYWRlcic7XHJcblxyXG5jbGFzcyBBcHBMb2FkZXIgZXh0ZW5kcyBMb2FkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ2h0dHBzOi8vbmV3c2FwaS5vcmcvdjIvJywge1xyXG4gICAgICAgICAgICBhcGlLZXk6ICdhZjlmN2FhYWUzYjE0ZTE1YTM3ZTY5ZTdhOWQ0NjhmYicsIC8vINC/0L7Qu9GD0YfQuNGC0LUg0YHQstC+0Lkg0LrQu9GO0YcgaHR0cHM6Ly9uZXdzYXBpLm9yZy9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBwTG9hZGVyO1xyXG4iLCJpbXBvcnQgQXBwTG9hZGVyIGZyb20gJy4vYXBwTG9hZGVyJztcclxuaW1wb3J0IHtDYWxsYmFja1R5cGUsIElEYXRhTmV3cywgSURhdGFTb3VyY2V9IGZyb20gXCIuLi8uLi90eXBlcy9pbnRlcmZhY2VcIjtcclxuXHJcbmNsYXNzIEFwcENvbnRyb2xsZXIgZXh0ZW5kcyBBcHBMb2FkZXIge1xyXG4gICAgZ2V0U291cmNlcyhjYWxsYmFjazogKGRhdGE/OiBJRGF0YVNvdXJjZSkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyLmdldFJlc3AoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnc291cmNlcycsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhbGxiYWNrXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXROZXdzKGU6IEV2ZW50LCBjYWxsYmFjazogKGRhdGE/OiBJRGF0YU5ld3MpID0+IHZvaWQpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgbmV3c0NvbnRhaW5lciA9IGUuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgd2hpbGUgKHRhcmdldCAhPT0gbmV3c0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc291cmNlX19pdGVtJykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZUlkID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zb3VyY2UtaWQnKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdzQ29udGFpbmVyLmdldEF0dHJpYnV0ZSgnZGF0YS1zb3VyY2UnKSAhPT0gc291cmNlSWQgJiYgc291cmNlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1zb3VyY2UnLCBzb3VyY2VJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VwZXIuZ2V0UmVzcChcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6ICdldmVyeXRoaW5nJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBzb3VyY2VJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwcENvbnRyb2xsZXI7XHJcbiIsIlxyXG5cclxuY2xhc3MgTG9hZGVyIHtcclxuICAgIGJhc2VMaW5rOiBzdHJpbmc7XHJcbiAgICBvcHRpb25zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJhc2VMaW5rOiBzdHJpbmcsIG9wdGlvbnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pIHtcclxuICAgICAgICB0aGlzLmJhc2VMaW5rID0gYmFzZUxpbms7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZXNwKFxyXG4gICAgICAgIHsgZW5kcG9pbnQgPSAnJywgb3B0aW9ucyA9IHt9IH0sXHJcbiAgICAgICAgY2FsbGJhY2sgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIGNhbGxiYWNrIGZvciBHRVQgcmVzcG9uc2UnKTtcclxuICAgICAgICB9XHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmxvYWQoJ0dFVCcsIGVuZHBvaW50LCBjYWxsYmFjaywgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgZXJyb3JIYW5kbGVyKHJlczogUmVzcG9uc2UpIHtcclxuICAgICAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDAxIHx8IHJlcy5zdGF0dXMgPT09IDQwNClcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTb3JyeSwgYnV0IHRoZXJlIGlzICR7cmVzLnN0YXR1c30gZXJyb3I6ICR7cmVzLnN0YXR1c1RleHR9YCk7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKHJlcy5zdGF0dXNUZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVVybChvcHRpb25zOiBvYmplY3QsIGVuZHBvaW50OiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCB1cmxPcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcclxuICAgICAgICBsZXQgdXJsID0gYCR7dGhpcy5iYXNlTGlua30ke2VuZHBvaW50fT9gO1xyXG5cclxuICAgICAgICBPYmplY3Qua2V5cyh1cmxPcHRpb25zKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgdXJsICs9IGAke2tleX09JHt1cmxPcHRpb25zW2tleV19JmA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB1cmwuc2xpY2UoMCwgLTEpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWQobWV0aG9kOiBzdHJpbmcsIGVuZHBvaW50OiBzdHJpbmcsIGNhbGxiYWNrOihkYXRhPzogSlNPTikgPT4gdm9pZCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgZmV0Y2godGhpcy5tYWtlVXJsKG9wdGlvbnMsIGVuZHBvaW50KSwgeyBtZXRob2QgfSlcclxuICAgICAgICAgICAgLnRoZW4odGhpcy5lcnJvckhhbmRsZXIpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiBjYWxsYmFjayhkYXRhKSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExvYWRlcjtcclxuIiwiaW1wb3J0IE5ld3MgZnJvbSAnLi9uZXdzL25ld3MnO1xyXG5pbXBvcnQgU291cmNlcyBmcm9tICcuL3NvdXJjZXMvc291cmNlcyc7XHJcbmltcG9ydCB7SURhdGFOZXdzLCBJRGF0YVNvdXJjZX0gZnJvbSBcIi4uLy4uL3R5cGVzL2ludGVyZmFjZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcFZpZXcge1xyXG4gICAgbmV3czogTmV3cztcclxuICAgIHNvdXJjZXM6IFNvdXJjZXM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5uZXdzID0gbmV3IE5ld3MoKTtcclxuICAgICAgICB0aGlzLnNvdXJjZXMgPSBuZXcgU291cmNlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdOZXdzKGRhdGE/OiBJRGF0YU5ld3MpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB2YWx1ZXMgPSBkYXRhPy5hcnRpY2xlcyA/IGRhdGE/LmFydGljbGVzIDogW107XHJcbiAgICAgICAgdGhpcy5uZXdzLmRyYXcodmFsdWVzKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3U291cmNlcyhkYXRhPzogSURhdGFTb3VyY2UpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB2YWx1ZXMgPSBkYXRhPy5zb3VyY2VzID8gZGF0YT8uc291cmNlcyA6IFtdO1xyXG4gICAgICAgIHRoaXMuc291cmNlcy5kcmF3KHZhbHVlcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwcFZpZXc7XHJcbiIsImltcG9ydCB7SUFydGljbGVzfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXMvaW50ZXJmYWNlXCI7XHJcblxyXG5pbXBvcnQgJy4vbmV3cy5jc3MnO1xyXG5cclxuY2xhc3MgTmV3cyB7XHJcbiAgICBkcmF3KGRhdGE6IElBcnRpY2xlc1tdKSB7XHJcbiAgICAgICAgY29uc3QgbmV3cyA9IGRhdGEubGVuZ3RoID49IDEwID8gZGF0YS5maWx0ZXIoKF9pdGVtLCBpZHgpID0+IGlkeCA8IDEwKSA6IGRhdGE7XHJcblxyXG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIGFzIERvY3VtZW50RnJhZ21lbnQ7XHJcbiAgICAgICAgY29uc3QgbmV3c0l0ZW1UZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld3NJdGVtVGVtcCcpIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcblxyXG4gICAgICAgIG5ld3MuZm9yRWFjaCgoaXRlbSwgaWR4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld3NDbG9uZSA9IG5ld3NJdGVtVGVtcC5jb250ZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGlmIChpZHggJSAyKSAobmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19pdGVtJykgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5hZGQoJ2FsdCcpO1xyXG5cclxuICAgICAgICAgICAgKG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKCcubmV3c19fbWV0YS1waG90bycpIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnVybFRvSW1hZ2UgfHwgJ2ltZy9uZXdzX3BsYWNlaG9sZGVyLmpwZydcclxuICAgICAgICAgICAgfSlgO1xyXG4gICAgICAgICAgICAobmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19tZXRhLWF1dGhvcicpIGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudCA9XHJcbiAgICAgICAgICAgICAgICBpdGVtLmF1dGhvciB8fCBpdGVtLnNvdXJjZS5uYW1lO1xyXG4gICAgICAgICAgICAobmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoJy5uZXdzX19tZXRhLWRhdGUnKSBhcyBIVE1MRWxlbWVudCkudGV4dENvbnRlbnQgPSBpdGVtLnB1Ymxpc2hlZEF0XHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMTApXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJy0nKVxyXG4gICAgICAgICAgICAgICAgLnJldmVyc2UoKVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oJy0nKTtcclxuXHJcbiAgICAgICAgICAgIChuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcignLm5ld3NfX2Rlc2NyaXB0aW9uLXRpdGxlJykgYXMgSFRNTEVsZW1lbnQpLnRleHRDb250ZW50ID0gaXRlbS50aXRsZTtcclxuICAgICAgICAgICAgKG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKCcubmV3c19fZGVzY3JpcHRpb24tc291cmNlJykgYXMgSFRNTEVsZW1lbnQpLnRleHRDb250ZW50ID0gaXRlbS5zb3VyY2UubmFtZTtcclxuICAgICAgICAgICAgKG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKCcubmV3c19fZGVzY3JpcHRpb24tY29udGVudCcpIGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudCA9IGl0ZW0uZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgIChuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcignLm5ld3NfX3JlYWQtbW9yZSBhJykgYXMgSFRNTEVsZW1lbnQpLnNldEF0dHJpYnV0ZSgnaHJlZicsIGl0ZW0udXJsKTtcclxuXHJcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZChuZXdzQ2xvbmUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3cycpIGFzIEhUTUxFbGVtZW50KS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld3MnKSBhcyBIVE1MRWxlbWVudCkuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOZXdzO1xyXG4iLCJpbXBvcnQge0lTb3VyY2VzfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXMvaW50ZXJmYWNlXCI7XHJcblxyXG5pbXBvcnQgJy4vc291cmNlcy5jc3MnO1xyXG5cclxuY2xhc3MgU291cmNlcyB7XHJcbiAgICBkcmF3KGRhdGE6IElTb3VyY2VzW10pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSBhcyBEb2N1bWVudEZyYWdtZW50O1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZUl0ZW1UZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NvdXJjZUl0ZW1UZW1wJykgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuXHJcbiAgICAgICAgZGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUNsb25lID0gc291cmNlSXRlbVRlbXAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIChzb3VyY2VDbG9uZS5xdWVyeVNlbGVjdG9yKCcuc291cmNlX19pdGVtLW5hbWUnKSBhcyBIVE1MU3BhbkVsZW1lbnQpLnRleHRDb250ZW50ID0gaXRlbS5uYW1lO1xyXG4gICAgICAgICAgICAoc291cmNlQ2xvbmUucXVlcnlTZWxlY3RvcignLnNvdXJjZV9faXRlbScpIGFzIEhUTUxEaXZFbGVtZW50KS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc291cmNlLWlkJywgaXRlbS5pZCk7XHJcblxyXG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmQoc291cmNlQ2xvbmUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvdXJjZXMnKSBhcyBIVE1MRWxlbWVudCkuYXBwZW5kKGZyYWdtZW50KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU291cmNlcztcclxuIiwiaW1wb3J0IEFwcCBmcm9tICcuL2NvbXBvbmVudHMvYXBwL2FwcCc7XHJcbmltcG9ydCAnLi9nbG9iYWwuY3NzJztcclxuXHJcbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcclxuYXBwLnN0YXJ0KCk7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInRoaXMiLCJjb250cm9sbGVyIiwidmlldyIsIkFwcFZpZXciLCJzdGFydCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZ2V0TmV3cyIsImRhdGEiLCJkcmF3TmV3cyIsImdldFNvdXJjZXMiLCJkcmF3U291cmNlcyIsIkFwcExvYWRlciIsInN1cGVyIiwiYXBpS2V5IiwiQXBwQ29udHJvbGxlciIsImNhbGxiYWNrIiwiZ2V0UmVzcCIsImVuZHBvaW50IiwidGFyZ2V0IiwibmV3c0NvbnRhaW5lciIsImN1cnJlbnRUYXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNvdXJjZUlkIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwib3B0aW9ucyIsInNvdXJjZXMiLCJwYXJlbnROb2RlIiwiYmFzZUxpbmsiLCJjb25zb2xlIiwiZXJyb3IiLCJsb2FkIiwiZXJyb3JIYW5kbGVyIiwicmVzIiwib2siLCJzdGF0dXMiLCJsb2ciLCJzdGF0dXNUZXh0IiwiRXJyb3IiLCJtYWtlVXJsIiwidXJsT3B0aW9ucyIsInVybCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5Iiwic2xpY2UiLCJtZXRob2QiLCJmZXRjaCIsInRoZW4iLCJqc29uIiwiY2F0Y2giLCJlcnIiLCJuZXdzIiwidmFsdWVzIiwiYXJ0aWNsZXMiLCJkcmF3IiwibGVuZ3RoIiwiZmlsdGVyIiwiX2l0ZW0iLCJpZHgiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJuZXdzSXRlbVRlbXAiLCJpdGVtIiwibmV3c0Nsb25lIiwiY29udGVudCIsImNsb25lTm9kZSIsImFkZCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwidXJsVG9JbWFnZSIsInRleHRDb250ZW50IiwiYXV0aG9yIiwic291cmNlIiwibmFtZSIsInB1Ymxpc2hlZEF0Iiwic3BsaXQiLCJyZXZlcnNlIiwiam9pbiIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJhcHBlbmQiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsInNvdXJjZUl0ZW1UZW1wIiwic291cmNlQ2xvbmUiLCJpZCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9